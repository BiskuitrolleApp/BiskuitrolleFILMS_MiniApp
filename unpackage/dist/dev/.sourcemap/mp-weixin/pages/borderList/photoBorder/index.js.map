{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zhengkaijie/Project/iTools-app/iToolsMiniApp/pages/borderList/photoBorder/index.vue?c1ea","webpack:////Users/zhengkaijie/Project/iTools-app/iToolsMiniApp/pages/borderList/photoBorder/index.vue?98c7","webpack:////Users/zhengkaijie/Project/iTools-app/iToolsMiniApp/pages/borderList/photoBorder/index.vue?d10c","webpack:////Users/zhengkaijie/Project/iTools-app/iToolsMiniApp/pages/borderList/photoBorder/index.vue?f7d0","uni-app:///pages/borderList/photoBorder/index.vue","webpack:////Users/zhengkaijie/Project/iTools-app/iToolsMiniApp/pages/borderList/photoBorder/index.vue?dba1","webpack:////Users/zhengkaijie/Project/iTools-app/iToolsMiniApp/pages/borderList/photoBorder/index.vue?679f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;AAE2D;AAC3D;AACA,+G,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,qUAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAAk1B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiDt2B;AACA;AACA;;AAEA,6E;AACA;AACA,cADA;AAEA,yBAFA;AAGA,yIAHA;AAIA,+BAJA;AAKA;AACA;AACA,GAPA;AAQA;AACA;AACA,GAVA,I;;AAYA;AACA;AACA,sBADA,EADA;;AAIA,MAJA,kBAIA;AACA;AACA,0BADA,EACA;AACA,gCAFA;AAGA,sDAHA;AAIA,uBAJA;AAKA,qBALA;AAMA,oBANA,EAMA;AACA,yBAPA,EAOA;AACA,2IARA;AASA,uBATA,EASA;AACA,kBAVA,EAUA;AACA,uBAXA,EAWA;AACA,mBAZA,EAYA;AACA,yBAbA,EAaA;AACA,oBAdA;AAeA;AACA;AACA,0BADA;AAEA,oCAFA;AAGA,gBAHA,EAhBA;;AAqBA;AACA,oBAtBA;AAuBA;AACA,sBAxBA;AAyBA;AACA;AACA,kBADA;AAEA,mBAFA;AAGA,qBAHA;AAIA,6BAJA,EAIA;AACA;AACA,kBADA,EACA;AACA,wBAFA,EAEA;AACA,4BAHA,EAGA;AACA,qBAJA,EAIA;AACA,0BALA;AAMA,2BANA;AAOA,oBAPA;AAQA,qBARA;AASA,kBATA,EASA;AACA,kBAVA,EAUA;AACA,kBAXA,CAWA;AAXA,SALA;AAkBA;AACA;AACA;AACA,oBADA,EACA;AACA,oBAFA,EAEA;AACA,oDAHA,EAGA;AACA,yBAJA,EAIA;AACA,gCALA,EAKA;AACA,uBANA,CAMA;AANA,WADA;AASA;AACA,oBADA,EACA;AACA,oBAFA,EAEA;AACA,mCAHA,EAGA;AACA,yBAJA,EAIA;AACA,gCALA,EAKA;AACA,uBANA,CAMA;AANA,WATA;AAiBA;AACA,oBADA,EACA;AACA,oBAFA,EAEA;AACA,yBAHA,EAGA;AACA,yBAJA,EAIA;AACA,gCALA,EAKA;AACA,uBANA,CAMA;AANA,WAjBA;AAyBA;AACA,oBADA,EACA;AACA,oBAFA,EAEA;AACA,mCAHA;AAIA,yBAJA,EAIA;AACA,gCALA,EAKA;AACA,uBANA,CAMA;AANA,WAzBA;AAiCA;AACA,oBADA,EACA;AACA,oBAFA,EAEA;AACA,8BAHA,EAGA;AACA,+BAJA;AAKA,+BALA,EAjCA,EAnBA,EA1BA;;;;;AAwFA,GA7FA;AA8FA,SA9FA,qBA8FA;AACA;AACA;AACA;AACA;AACA;AACA,GApGA;AAqGA;AACA,0CADA;AAEA,eAFA,yBAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA;;AAMA,KAVA;AAWA;AACA,eAZA,uBAYA,QAZA,EAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA,uBAFA;AAGA,kBAHA;;AAKA;AACA,uBADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WALA,MAKA;AACA;AACA;AACA;AACA,SAbA;AAcA;AACA;AACA;AACA,SAjBA;;AAmBA,KA7CA;AA8CA,kBA9CA,0BA8CA,QA9CA,EA8CA;AACA;AACA;AACA,+BADA;AAEA,qBAFA;AAGA;AACA;AACA;AACA,sCADA;AAEA,sEAFA,CAEA;AAFA,YADA;AAKA;AACA;AACA;AACA,SAZA;AAaA;AACA;AACA;AACA,2BADA;AAEA,wBAFA;;AAIA;AACA;AACA;AACA,SAtBA;;AAwBA,KAxEA;AAyEA;AACA,sBA1EA,gCA0EA;AACA;AACA;AACA,8BADA;AAEA;AACA;AACA;AACA;AACA,WAFA,MAEA;;AAEA;;;;;AAKA;AACA,SAdA;AAeA;;AAEA;;;;;AAKA,SAtBA;;AAwBA,KApGA;AAqGA;AACA,0BAtGA,oCAsGA;AACA;AACA;AACA;AACA;AACA,SADA;AAEA,UAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA,oBADA;AAEA,oEAFA,CAEA;AAFA;AAIA,OAdA;AAeA,WAfA,CAeA;AACA;AACA;AACA,uBADA;AAEA,wBAFA;AAGA,yBAHA;;AAKA,OAtBA;AAuBA,KAjIA;AAkIA,4BAlIA,sCAkIA;AACA,oBADA,GACA,KADA;AAEA;AACA,kBAHA,GAGA,mBAHA;AAIA;AAJA,yCAKA,+CALA,QAKA,QALA;AAMA;AACA,qBAPA,GAOA,oBAPA;AAQA,mBARA,GAQA,EARA;AASA,iBATA,GASA,CATA,eASA,SATA;AAUA;AACA,4BADA,CACA,wBADA;AAEA,sBAFA,CAEA,CAFA;AAGA,yBAHA,CAGA,UAHA,EAGA,KAHA;AAIA,qBAJA,EAVA,UAUA,IAVA;AAeA;AACA,4CAhBA,QASA,OATA;;AAkBA;AACA;AACA;AACA,2BADA;AAEA,4EAFA,CAEA;AAFA,mBApBA;AAwBA,KA1JA;AA2JA;AACA,iBA5JA,2BA4JA;AACA,oBADA,GACA,MADA;AAEA;AACA;AACA;AACA,iBAHA,CAGA;AACA;AACA;AACA,iCADA;AAEA,kCAFA;AAGA,mCAHA;;AAKA;AACA,iBAbA;AAcA,KA1KA;AA2KA,eA3KA,yBA2KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA,6BAFA;AAGA,gBAHA;AAIA;AACA;AACA,mCADA;AAEA,qCAFA;AAGA,gCAHA;;AAKA;AACA;AACA;AACA,qBAFA,EAEA,KAFA;AAGA,uBAVA,GAUA,kBAVA;AAWA;AACA;AACA;AACA,4CAdA,6IAJA;;AAoBA,YApBA,kBAoBA;AACA;AACA,2BADA;AAEA,wBAFA;;AAIA,SAzBA;;AA2BA,KA5MA;AA6MA;;;AAGA,iBAhNA,yBAgNA,GAhNA,EAgNA;AACA,oBADA,GACA,MADA;AAEA,yCAFA;AAGA;AACA;AACA,sBADA,CACA;AACA;AACA;AACA;AACA;AACA,mBANA;AAOA,uBAPA,CAOA;AACA;AACA;AACA;AACA,mBAXA;AAYA;AACA;AACA,iBAfA,EAeA,IAfA,EAHA;AAmBA,KAnOA;AAoOA;AACA,sBArOA,gCAqOA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA,wBAFA;AAGA,uBAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9QA;AA+QA;AACA,kBAhRA,0BAgRA,YAhRA,EAgRA;AACA;AACA;AACA;AACA;AACA;AACA,iBAFA,EAEA,KAFA;AAGA;AACA;AACA;AACA,iCADA;AAEA,iCAFA,IATA;;AAaA,8EAbA;AAcA;AACA;AACA,iBAFA,EAEA,IAFA,EAdA;AAiBA,KAjSA;AAkSA;AACA,aAnSA,uBAmSA;AACA,oBADA,GACA,MADA;AAEA;AACA;AACA,iCADA;AAEA,iCAFA;;AAIA;AACA,6BARA,GAQA,MARA,CAQA,aARA,EAQA,YARA,GAQA,MARA,CAQA,YARA;AASA,yBATA,GASA,aATA,CASA,SATA,EASA,QATA,GASA,aATA,CASA,QATA;AAUA;AACA,mBAXA,GAWA,iCAXA;AAYA,6BAZA,GAYA,kBAZA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAzBA,GAyBA,2CAzBA;AA0BA,wBA1BA,GA0BA,2CA1BA;AA2BA;AACA;AACA;AACA,0BA9BA,GA8BA,4CA9BA;AA+BA,4BA/BA,GA+BA,2CA/BA;AAgCA,0BAhCA,GAgCA,eAhCA;AAiCA,mCAjCA,GAiCA,2CAjCA;AAkCA;;AAEA,4BApCA,GAoCA,+EApCA;AAqCA,4BArCA,GAqCA,gDArCA;AAsCA;AACA,mBADA;AAEA,4CAFA;AAGA,uFAHA;AAIA,8CAJA;AAKA,4BALA;AAMA,4BANA;AAOA,oBAPA;AAQA,oBARA;AASA,kBATA;AAUA,0BAVA;;AAYA,2BAlDA,GAkDA,8EAlDA;AAmDA,2BAnDA,GAmDA,oHAnDA;AAoDA;AACA,mBADA;AAEA,2CAFA;AAGA,sFAHA;AAIA,6CAJA;AAKA,2BALA;AAMA,2BANA;AAOA,oBAPA;AAQA,qBARA;AASA,kBATA;AAUA,0BAVA,EApDA;;;AAiEA,qJAjEA,UAiEA,SAjEA;AAkEA,4JAlEA,UAkEA,YAlEA;AAmEA,0BAnEA,GAmEA,oDAnEA;AAoEA;;AAEA,wBAtEA,GAsEA,gHAtEA;AAuEA,wBAvEA,GAuEA,mHAvEA;AAwEA;AACA,mBADA;AAEA,wCAFA;AAGA,mFAHA;AAIA,0CAJA;AAKA,wBALA;AAMA,wBANA;AAOA,oBAPA;AAQA,oBARA;AASA,kBATA;AAUA,0BAVA;;AAYA,qBApFA,GAoFA,6GApFA;AAqFA,qBArFA,GAqFA,8GArFA;AAsFA;AACA,mBADA;AAEA,qCAFA;AAGA,gFAHA;AAIA,uCAJA;AAKA,qBALA;AAMA,qBANA;AAOA,oBAPA;AAQA,qBARA;AASA,kBATA;AAUA,0BAVA;;AAYA;AACA,kCAnGA;AAoGA;AACA,gFADA;AAEA,mFAFA;AAGA,iBAvGA;AAwGA,6BAxGA,GAwGA,mEAxGA;AAyGA,6BAzGA,GAyGA,8EAzGA;;AA2GA;AACA,yDA5GA,CA4GA;AACA,8EA7GA,CA6GA;AACA,iDA9GA,CA8GA;AACA;AACA,8EAhHA,CAgHA;AACA;;AAEA;AACA,uBApHA,GAoHA,EApHA,EAoHA;AACA,8BArHA,GAqHA,EArHA;AAsHA,iBAtHA,GAsHA,CAtHA,eAsHA,iCAtHA;AAuHA;AACA;AACA,iBAzHA;;AA2HA;AACA;AACA,iJAFA,CA3HA;;AA+HA;AACA,8DAhIA,6CAsHA,GAtHA;;;;AAoIA;AACA;AACA;AACA,iBAFA,MAEA;AACA;AACA;AACA;AACA;AACA,8BADA,EACA;AACA,yBAFA,mBAEA,OAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAFA;AAGA;AACA;AACA,mBArBA;AAsBA,sBAtBA,kBAsBA;AACA;AACA;AACA;AACA,qBAFA;AAGA;AACA;AACA,mBA7BA,IA3IA;;AA0KA,KA7cA;AA8cA;AACA,YA/cA,oBA+cA,GA/cA,EA+cA,IA/cA,EA+cA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA,MAMA;AACA;AACA;AACA,KAveA;;AAyeA;AACA,iBA1eA,2BA0eA;AACA,oBADA,GACA,MADA;AAEA,+BAFA;AAGA,0BAHA;;;AAMA;AACA,kCADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAxBA,GANA;;;AAiCA;AACA,mDAlCA;;AAoCA,KA9gBA;AA+gBA;AACA;AACA,6BAjhBA,uCAihBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA,KA9hBA;AA+hBA;AACA,wBAhiBA,gCAgiBA,IAhiBA,EAgiBA,KAhiBA,EAgiBA;AACA;AACA;AACA;AACA;AACA;AACA,KAtiBA;AAuiBA;AACA,gBAxiBA,0BAwiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;;AAEA,oDAtBA,CAsBA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAhmBA;AAimBA,gBAjmBA,wBAimBA,GAjmBA,EAimBA,IAjmBA,EAimBA,IAjmBA,EAimBA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA,KAxmBA;AAymBA,aAzmBA,uBAymBA;AACA;AACA;AACA;AACA,qBADA;AAEA,4BAFA;AAGA;AACA;AACA;AACA;AACA,WAPA;;AASA,OAVA,MAUA;AACA;AACA;AACA,KAxnBA;AAynBA;AACA,iBA1nBA,2BA0nBA;AACA;AACA,sBAFA;AAGA,mBAHA,GAGA,IAHA,CAGA,aAHA,CAGA,YAHA,GAGA,IAHA,CAGA,YAHA;AAIA;AACA,uBADA;AAEA,sBAFA;AAGA,kBAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA,YAFA;AAGA,YAHA;AAIA,kCAJA;AAKA,oCALA;AAMA,qDANA,EAMA;AACA,uDAPA,EAOA;AACA,qBARA;AASA;AACA;AACA;AACA;AACA;AACA,gBAFA;AAGA,gBAHA;AAIA,sCAJA;AAKA,wCALA;AAMA,yDANA,EAMA;AACA,2DAPA,EAOA;AACA,yBARA;AASA,2BATA;AAUA,uCAVA;AAWA;AACA;AACA;AACA;AACA,6CADA;AAEA,oCAFA;AAGA;AACA,uEADA,CACA;AACA;AACA;AACA,mBAPA;;AASA,eAVA,CAUA;AACA;AACA;AACA;AACA;AACA,aA5BA;AA6BA;AACA;AACA;AACA;AACA;AACA,aAlCA;;AAoCA,SAhDA;AAiDA;AACA;AACA;AACA;AACA;AACA,SAtDA;;AAwDA,KA/rBA;AAgsBA;AACA,iBAjsBA,2BAisBA;AACA,sBADA;AAEA,mBAFA,GAEA,IAFA,CAEA,aAFA;AAGA;AACA;AACA;AACA,8BADA;AAEA,yBAFA;AAGA,oBAHA;;AAKA,OANA,MAMA;AACA;AACA,yBADA;AAEA,yBAFA;AAGA,oBAHA;;AAKA;AACA;AACA,gCADA;AAEA,eAFA,qBAEA;AACA;AACA;AACA,+BADA;AAEA,wBAFA;AAGA,0BAHA;;AAKA,SATA;AAUA,YAVA,gBAUA,KAVA,EAUA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,0BAFA;;AAIA,WALA,MAKA;AACA;AACA,qCADA;AAEA,0BAFA;;AAIA;AACA,SAxBA;;AA0BA;AACA;AACA,KA9uBA;;AAgvBA,cAhvBA,wBAgvBA;AACA;AACA,KAlvBA;AAmvBA,aAnvBA,uBAmvBA;AACA;AACA;AACA;AACA,qBADA;AAEA,4BAFA;AAGA;AACA;AACA;AACA;AACA,WAPA;;AASA,OAVA,MAUA;AACA;AACA;AACA,KAlwBA,GArGA,E;;;;;;;;;;;;;AClEA;AAAA;AAAA;AAAA;AAAqlD,CAAgB,07CAAG,EAAC,C;;;;;;;;;;;ACAzmD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/borderList/photoBorder/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/borderList/photoBorder/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=d59024d6&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=d59024d6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d59024d6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/borderList/photoBorder/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=d59024d6&scoped=true&\"","var components\ntry {\n  components = {\n    uNoticeBar: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-notice-bar/u-notice-bar\" */ \"@/uni_modules/uview-ui/components/u-notice-bar/u-notice-bar.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uPopup: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"photoBorder-page\">\n\t\t<view class=\"unshow-page\" v-if=\"showGenerator\">\n\t\t\t<canvas\n\t\t\t\tclass=\"canvas\"\n\t\t\t\t:height=\"photoDrawInfo.height\"\n\t\t\t\t:width=\"photoDrawInfo.width\"\n\t\t\t\t:style=\"{ width: photoDrawInfo.width + 'px', height: photoDrawInfo.height + 'px', zoom: canvasConfig.scale }\"\n\t\t\t\tid=\"canvas\"\n\t\t\t\tcanvas-id=\"canvas\"\n\t\t\t></canvas>\n\t\t</view>\n\t\t<view class=\"main-page\">\n\t\t\t<view class=\"systemPlatform\" v-show=\"systemPlatform == 'ios'\"><u-notice-bar :text=\"systemPlatformText\" mode=\"closable\"></u-notice-bar></view>\n\t\t\t<view class=\"canvas-wrapper\">\n\t\t\t\t<view\n\t\t\t\t\tclass=\"canvas-box\"\n\t\t\t\t\tv-show=\"!tempImageBase64\"\n\t\t\t\t\t:style=\"{ width: photoDrawInfo.width * canvasConfig.scale + 'px', height: photoDrawInfo.width * canvasConfig.scale + 'px' }\"\n\t\t\t\t\t@click=\"onUpdatedFile\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"iconTipBox_wrapper\"\n\t\t\t\t\t\t<view class=\"icon_wrapper\"><u-icon name=\"photo\"></u-icon></view>\n\t\t\t\t\t\t<view class=\"tip\">点击上传图片</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view\n\t\t\t\t\tclass=\"canvas-box\"\n\t\t\t\t\tv-show=\"tempImageBase64\"\n\t\t\t\t\t:style=\"{ width: photoDrawInfo.width * canvasConfig.scale + 'px', height: photoDrawInfo.height * canvasConfig.scale + 'px' }\"\n\t\t\t\t\t@click=\"onUpdatedFile\"\n\t\t\t\t>\n\t\t\t\t\t<image :src=\"tempImageBase64\" mode=\"widthFix\" :style=\"{ width: photoDrawInfo.width * canvasConfig.scale + 'px' }\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"downLoadBtn\">\n\t\t\t\t<u-button text=\"高级\" size=\"normal\" type=\"info\" @click=\"openPopup\"></u-button>\n\t\t\t\t<u-button text=\"下载\" size=\"normal\" color=\"#67C23A\" @click=\"saveImage\"></u-button>\n\t\t\t</view>\n\t\t\t<view class=\"popup-wrapper\">\n\t\t\t\t<u-popup mode=\"bottom\" :closeable=\"true\" :round=\"10\" :show=\"showForm\" @close=\"closePopup\" :safeAreaInsetTop=\"true\" :safeAreaInsetBottom=\"true\">\n\t\t\t\t\t<info-form :data=\"photoDrawInfo\" :visible=\"showForm\" @close=\"closePopup\" @change=\"resetPhotoInfo\" :logoList=\"photoConfigData\"></info-form>\n\t\t\t\t</u-popup>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { getImageData, getFloatLocationByExif } from '@/util/js_sdk/izExif/izExif.js';\nimport tools from '@/util/tools/index.js';\nimport { mapGetters, mapMutations } from 'vuex';\nimport infoForm from './components/form.vue';\nimport _ from 'lodash';\nuni.loadFontFace({\n\tglobal: true,\n\tfamily: 'gilmerRegular',\n\tsource: 'url(\"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-915d01a8-6118-4e1e-840f-697d960cbba2/fb5d1790-57b8-4ae5-a1ab-f6bf975ea055.otf\")',\n\tscopes: ['webview', 'native'],\n\tsuccess: function(res) {\n\t\tconsole.log('字体加载完成');\n\t},\n\tfail: function(error) {\n\t\tconsole.log('字体加载失败', error);\n\t}\n});\nexport default {\n\tcomponents: {\n\t\tinfoForm\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowGenerator: false, // 是否显示生成器\n\t\t\tsystemPlatform: 'devtools',\n\t\t\tsystemPlatformText: 'ios由于安全会擦除图片信息，无法正常识别图片的参数',\n\t\t\tshowQuality: 0.01,\n\t\t\tshowForm: false,\n\t\t\tsaveImgUrl: '', // 保存图片的临时地址\n\t\t\tphotoConfigData: [], // 图片基础logo信息\n\t\t\tdefaultLogo: 'https://vkceyugu.cdn.bspapp.com/VKCEYUGU-915d01a8-6118-4e1e-840f-697d960cbba2/47e9cb99-42e4-4b8b-8447-c8597ea8b5b2.png',\n\t\t\tphotoExifInfo: {}, // 图片EXIF信息\n\t\t\tuserInfo: {}, // 用户信息\n\t\t\tphotoDrawList: [], // 用于图片绘制的历史列表\n\t\t\ttempImage: '', // 用于查看下载的文件\n\t\t\ttempImageBase64: '', // 用于存储查看的临时文件base64\n\t\t\tloading: false,\n\t\t\t// canvas标签配置\n\t\t\tcanvasConfig: {\n\t\t\t\tmaxCanvasSize: 320,\n\t\t\t\tmaxCanvasInfoWrapperSize: 30,\n\t\t\t\tscale: 1\n\t\t\t},\n\t\t\t// 渲染数据\n\t\t\trenderData: {},\n\t\t\t// 下载数据\n\t\t\tdownLoadData: {},\n\t\t\t// 用于图片绘制的信息\n\t\t\tphotoDrawInfo: {\n\t\t\t\twidth: 320,\n\t\t\t\theight: 240,\n\t\t\t\tcompress: 100,\n\t\t\t\tbackground: '#ffffff', // 背景颜色\n\t\t\t\tmainImage: {\n\t\t\t\t\tscale: 1, // 缩放比例 1-0.5也就是整个wrapper的100%和50%\n\t\t\t\t\tcustomAngle: 0, // 自定义旋转角度\n\t\t\t\t\tposition: 'center', // 位置 优先级低于customXAxis，customYAxis\n\t\t\t\t\tcontent: '', // 图片数据\n\t\t\t\t\toriginWidth: 100,\n\t\t\t\t\toriginHeight: 100,\n\t\t\t\t\twidth: 100,\n\t\t\t\t\theight: 100,\n\t\t\t\t\txAxis: 0, // x轴偏移：由position和customXAxis决定\n\t\t\t\t\tyAxis: 0, // x轴偏移：由position和customYAxis决定\n\t\t\t\t\tangle: 0 // 旋转角度\n\t\t\t\t},\n\t\t\t\t// 架构数据\n\t\t\t\tEXIFInfo: {\n\t\t\t\t\timgInfo: {\n\t\t\t\t\t\txAxis: 0, // x轴偏移\n\t\t\t\t\t\tyAxis: 0, // y轴偏\n\t\t\t\t\t\tcontent: 'focal, fnumber, exposure, ISO', // 图片焦段 光圈 快门 iso信息\n\t\t\t\t\t\tfontStyle: '', // 优先级为120\n\t\t\t\t\t\tfontColor: '#000000', // 颜色 优先级为110\n\t\t\t\t\t\tfontSize: 8 // 字体颜色 优先级为110\n\t\t\t\t\t},\n\t\t\t\t\tmachineName: {\n\t\t\t\t\t\txAxis: 0, // x轴偏移\n\t\t\t\t\t\tyAxis: 0, // y轴偏移\n\t\t\t\t\t\tcontent: 'machine name', // 机器名称\n\t\t\t\t\t\tfontStyle: '', // 优先级为120\n\t\t\t\t\t\tfontColor: '#000000', // 颜色 优先级为110\n\t\t\t\t\t\tfontSize: 8 // 字体颜色 优先级为110\n\t\t\t\t\t},\n\t\t\t\t\ttime: {\n\t\t\t\t\t\txAxis: 0, // x轴偏移\n\t\t\t\t\t\tyAxis: 0, // y轴偏移\n\t\t\t\t\t\tcontent: '时间', // 时间\n\t\t\t\t\t\tfontStyle: '', // 优先级为120\n\t\t\t\t\t\tfontColor: '#9f9f9f', // 颜色 优先级为110\n\t\t\t\t\t\tfontSize: 6 // 字体颜色 优先级为110\n\t\t\t\t\t},\n\t\t\t\t\tauthorName: {\n\t\t\t\t\t\txAxis: 0, // x轴偏移\n\t\t\t\t\t\tyAxis: 0, // y轴偏移\n\t\t\t\t\t\tcontent: 'PHOTO BY @ ？',\n\t\t\t\t\t\tfontStyle: '', // 优先级为120\n\t\t\t\t\t\tfontColor: '#9f9f9f', // 颜色 优先级为110\n\t\t\t\t\t\tfontSize: 6 // 字体颜色 优先级为110\n\t\t\t\t\t},\n\t\t\t\t\tbrandLogo: {\n\t\t\t\t\t\txAxis: 0, // x轴偏移\n\t\t\t\t\t\tyAxis: 0, // y轴偏移\n\t\t\t\t\t\tcontent: 'default', // 图片映射\n\t\t\t\t\t\txPosition: 'center',\n\t\t\t\t\t\tyPosition: 'center'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.getPlatform();\n\t\tthis.getPhotoConfigList();\n\t\t// setTimeout(() => {\n\t\t// \tthis.showForm = true;\n\t\t// }, 50);\n\t},\n\tmethods: {\n\t\t...mapMutations(['setUserInfo']),\n\t\tgetPlatform() {\n\t\t\tlet that = this;\n\t\t\tuni.getSystemInfo({\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tconsole.log('getSystemInfo', res);\n\t\t\t\t\tthat.systemPlatform = res.platform;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 获取用户信息\n\t\tgetUserInfo(callback) {\n\t\t\tlet that = this;\n\t\t\tconsole.log(that.userInfo);\n\t\t\tif (that.userInfo.nickName) {\n\t\t\t\tconsole.log(that.userInfo);\n\t\t\t\tif (callback && typeof callback == 'function') {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '获取用户信息',\n\t\t\t\tduration: 15000,\n\t\t\t\tmask: true\n\t\t\t});\n\t\t\tuni.getStorage({\n\t\t\t\tkey: 'userInfo',\n\t\t\t\tsuccess: function({ data }) {\n\t\t\t\t\tlet time = new Date().getTime();\n\t\t\t\t\tif (data.expirationTime && time < data.expirationTime) {\n\t\t\t\t\t\tthat.userInfo = data.userInfo;\n\t\t\t\t\t\tif (callback && typeof callback == 'function') {\n\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthat.getUserProfile(callback);\n\t\t\t\t\t}\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tthat.getUserProfile(callback);\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetUserProfile(callback) {\n\t\t\tlet that = this;\n\t\t\tuni.getUserProfile({\n\t\t\t\tdesc: '用于您的页面展示用户头像与昵称',\n\t\t\t\tlang: 'zh_CN',\n\t\t\t\tsuccess: resData => {\n\t\t\t\t\t(that.userInfo = resData.userInfo),\n\t\t\t\t\t\tuni.setStorageSync('userInfo', {\n\t\t\t\t\t\t\tuserInfo: resData.userInfo,\n\t\t\t\t\t\t\texpirationTime: new Date().getTime() + 12 * 60 * 60 * 1000 // 过期时间为12小时\n\t\t\t\t\t\t});\n\t\t\t\t\tif (callback && typeof callback == 'function') {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tuni.setStorageSync('userInfo', {});\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '获取用户失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\tif (callback && typeof callback == 'function') {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 获得配置信息\n\t\tgetPhotoConfigList() {\n\t\t\tlet that = this;\n\t\t\tuni.getStorage({\n\t\t\t\tkey: 'photoConfigData',\n\t\t\t\tsuccess: function({ data }) {\n\t\t\t\t\tlet time = new Date().getTime();\n\t\t\t\t\tif (data.expirationTime && time < data.expirationTime) {\n\t\t\t\t\t\tthat.photoConfigData = data.data;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\n\t\t\t\t\t\tthat.getPhotoConfigListByWXDB();\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t\t// #ifdef MP-ALIPAY\n\t\t\t\t\t\tthat.getPhotoConfigListByDB();\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\t// #ifdef MP-WEIXIN\n\t\t\t\t\tthat.getPhotoConfigListByWXDB();\n\t\t\t\t\t// #endif\n\t\t\t\t\t// #ifdef MP-ALIPAY\n\t\t\t\t\tthat.getPhotoConfigListByDB();\n\t\t\t\t\t// #endif\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 获得配置信息，从数据库中请求\n\t\tgetPhotoConfigListByDB() {\n\t\t\tlet that = this;\n\t\t\tconst db = uniCloud.database();\n\t\t\tconsole.log('数据库中获取');\n\t\t\tdb.collection('photo_broder_logo_list')\n\t\t\t\t.get()\n\t\t\t\t.then(({ result }) => {\n\t\t\t\t\t// res 为数据库查询结果\n\t\t\t\t\tconsole.log('配置加载完成');\n\t\t\t\t\tlet list = result.data;\n\t\t\t\t\tlist = _.sortBy(list, function(o) {\n\t\t\t\t\t\treturn o.sort_key;\n\t\t\t\t\t});\n\t\t\t\t\tthat.photoConfigData = list;\n\t\t\t\t\tuni.setStorageSync('photoConfigData', {\n\t\t\t\t\t\tdata: list,\n\t\t\t\t\t\texpirationTime: new Date().getTime() + 24 * 60 * 60 * 1000 // 过期时间为24小时\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tthat.photoConfigData = [];\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'error',\n\t\t\t\t\t\tduration: 1000,\n\t\t\t\t\t\ttitle: '配置加载失败'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tasync getPhotoConfigListByWXDB() {\n\t\t\tlet that = this;\n\t\t\twx.cloud.init({ traceUser: true });\n\t\t\tconst db = wx.cloud.database();\n\t\t\t// 1，获取数据的总个数\n\t\t\tlet countObj = await db.collection('photo_broder_logo_list').count();\n\t\t\tconsole.log('countObj', countObj);\n\t\t\tlet count = countObj.total || 20;\n\t\t\tlet all = [];\n\t\t\tfor (let i = 0; i < count; i += 20) {\n\t\t\t\tlet list = await db\n\t\t\t\t\t.collection('photo_broder_logo_list')\n\t\t\t\t\t.skip(i)\n\t\t\t\t\t.orderBy('sort_key', 'asc')\n\t\t\t\t\t.get();\n\t\t\t\tconsole.log('list', list);\n\t\t\t\tall = all.concat(list.data);\n\t\t\t}\n\t\t\tthat.photoConfigData = all;\n\t\t\tconsole.log('getPhotoConfigListByWXDB list', all);\n\t\t\tuni.setStorageSync('photoConfigData', {\n\t\t\t\tdata: all,\n\t\t\t\texpirationTime: new Date().getTime() + 24 * 60 * 60 * 1000 // 过期时间为24小时\n\t\t\t});\n\t\t},\n\t\t// 点击重新上传图片\n\t\tasync onUpdatedFile() {\n\t\t\tlet that = this;\n\t\t\ttry {\n\t\t\t\tthat.getUserInfo(that.chooseImage);\n\t\t\t\tuni.hideLoading();\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('getUserInfo', e);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: 'error',\n\t\t\t\t\tduration: 1000,\n\t\t\t\t\ttitle: '需要用户信息'\n\t\t\t\t});\n\t\t\t\tuni.hideLoading();\n\t\t\t}\n\t\t},\n\t\tchooseImage() {\n\t\t\tlet that = this;\n\t\t\tconsole.log('chooseImage');\n\t\t\tif (that.loading) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tuni.chooseImage({\n\t\t\t\tsizeType: ['original'],\n\t\t\t\tsourceType: ['album'],\n\t\t\t\tcount: 1,\n\t\t\t\tsuccess: async e => {\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: '开始绘制',\n\t\t\t\t\t\tduration: 15000,\n\t\t\t\t\t\tmask: true\n\t\t\t\t\t});\n\t\t\t\t\tthat.loading = true;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t}, 10000);\n\t\t\t\t\tlet src = e.tempFilePaths[0];\n\t\t\t\t\tthat.photoDrawInfo.mainImage.content = src;\n\t\t\t\t\tthat.tempImage = '';\n\t\t\t\t\tthat.tempImageBase64 = '';\n\t\t\t\t\tthat.initPhotoInfo(src);\n\t\t\t\t},\n\t\t\t\tfail() {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '获取图片失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * 初始化图片信息，重刷调用\n\t\t */\n\t\tasync initPhotoInfo(src, canvasId = 'canvas') {\n\t\t\tlet that = this;\n\t\t\tawait that.getCanvasSize(src);\n\t\t\tsetTimeout(function() {\n\t\t\t\tgetImageData(src)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log('getImageData', JSON.stringify(res.exif));\n\t\t\t\t\t\tthat.photoExifInfo = res.exif;\n\t\t\t\t\t\tthat.initExifCanvasInfo(res.exif);\n\t\t\t\t\t\tthat.startDraw();\n\t\t\t\t\t})\n\t\t\t\t\t.catch(e => {\n\t\t\t\t\t\tconsole.log('getImageData error', e);\n\t\t\t\t\t\tthat.initExifCanvasInfo();\n\t\t\t\t\t\tthat.startDraw();\n\t\t\t\t\t});\n\t\t\t\t// var array = uni.getFileSystemManager().readFileSync(src);\n\t\t\t\t// var r = handleBinaryFile(array);\n\t\t\t}, 1000);\n\t\t},\n\t\t// 初始化exif的info信息到\n\t\tinitExifCanvasInfo(info = {}) {\n\t\t\tlet that = this;\n\t\t\tconsole.log('initExifCanvasInfo', info);\n\t\t\tif (!info.FNumber || !info.ExposureTime || !info.FocalLength || !info.Make || !info.Model) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: 'error',\n\t\t\t\t\tduration: 1000,\n\t\t\t\t\ttitle: '识别失败'\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.photoDrawInfo.EXIFInfo.brandLogo.content = info.Make || 'default';\n\t\t\tthis.photoDrawInfo.EXIFInfo.machineName.content = info.Model || 'machine name';\n\t\t\tlet time = info.DateTimeOriginal;\n\t\t\tif (time && time.indexOf(':') >= 4) {\n\t\t\t\ttime = time.replace(':', '-');\n\t\t\t\ttime = time.replace(':', '-');\n\t\t\t}\n\t\t\tlet currentTime = tools.formatTime(new Date(), 'yyyy-MM-dd hh:mm:ss');\n\t\t\tthis.photoDrawInfo.EXIFInfo.time.content = time || currentTime;\n\t\t\tthis.photoDrawInfo.EXIFInfo.authorName.content = 'PHOTO BY @' + that.userInfo.nickName || 'User';\n\t\t\t// 图片焦段 光圈 快门 iso信息\n\t\t\t// 结构: 28mm f/8 1/500 ISO100\n\t\t\t// 焦段\n\t\t\tlet FocalLength = '?mm ';\n\t\t\tlet FNumber = 'f/? ';\n\t\t\tlet ExposureTime = '?/?';\n\t\t\tlet ISOSpeedRatings = ' ISO ?';\n\t\t\tif (info.FocalLength) {\n\t\t\t\tFocalLength = info.FocalLength + 'mm ';\n\t\t\t}\n\t\t\tif (info.FNumber && info.FNumber.numerator && info.FNumber.denominator) {\n\t\t\t\tFNumber = 'f/' + info.FNumber.numerator / info.FNumber.denominator + ' ';\n\t\t\t}\n\t\t\tif (info.ExposureTime && info.ExposureTime.numerator && info.ExposureTime.denominator) {\n\t\t\t\tExposureTime = info.ExposureTime.numerator + '/' + info.ExposureTime.denominator;\n\t\t\t}\n\t\t\tif (info.ISOSpeedRatings) {\n\t\t\t\tISOSpeedRatings = ISOSpeedRatings = ' ISO' + (info.ISOSpeedRatings || ' ?');\n\t\t\t}\n\t\t\tthis.photoDrawInfo.EXIFInfo.imgInfo.content = FocalLength + FNumber + ExposureTime + ISOSpeedRatings;\n\t\t\tconsole.log('photoDrawInfo', this.photoDrawInfo);\n\t\t},\n\t\t// 重绘图片\n\t\tasync resetPhotoInfo(newPhotoInfo) {\n\t\t\tthis.tempImage = '';\n\t\t\tthis.tempImageBase64 = '';\n\t\t\tthis.loading = true;\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.loading = false;\n\t\t\t}, 10000);\n\t\t\tthis.closePopup();\n\t\t\tthis.photoDrawInfo = newPhotoInfo;\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '绘制中...',\n\t\t\t\tduration: 60000\n\t\t\t});\n\t\t\tawait this.getCanvasSize(this.photoDrawInfo.mainImage.content);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.startDraw();\n\t\t\t}, 1000);\n\t\t},\n\t\t// 开始绘制\n\t\tasync startDraw() {\n\t\t\tlet that = this;\n\t\t\tconsole.log('开始绘制');\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '绘制中...',\n\t\t\t\tduration: 60000\n\t\t\t});\n\t\t\tthat.showGenerator = true;\n\t\t\tlet { photoDrawInfo, canvasConfig } = this;\n\t\t\tlet { mainImage, EXIFInfo } = photoDrawInfo;\n\t\t\tconsole.log('绘制开始>>>>>>>>>>>>>>>');\n\t\t\tlet ctx = uni.createCanvasContext('canvas');\n\t\t\tlet currentScanle = canvasConfig.scale;\n\t\t\t// 设置宽高\n\t\t\tconsole.log('cavans宽高：', photoDrawInfo.width, photoDrawInfo.height);\n\t\t\tctx.width = photoDrawInfo.width;\n\t\t\tctx.height = photoDrawInfo.height;\n\t\t\tctx.clearRect(0, 0, photoDrawInfo.width, photoDrawInfo.height);\n\t\t\t// 设置背景颜色\n\t\t\tctx.setFillStyle(photoDrawInfo.background);\n\t\t\tctx.fillRect(0, 0, photoDrawInfo.width, photoDrawInfo.height);\n\t\t\t// 绘制图片\n\t\t\t// ctx.drawImage(mainImage.content, mainImage.xAxis, mainImage.yAxis, mainImage.width, mainImage.height);\n\t\t\tctx.drawImage(mainImage.content, mainImage.xAxis, mainImage.yAxis, mainImage.width, mainImage.height);\n\t\t\t// 绘制底部字体\n\t\t\tlet paddingX = that.calculationScaleSize(8, currentScanle);\n\t\t\tlet paddingY = that.calculationScaleSize(0, currentScanle);\n\t\t\tif(mainImage.yAxis *1 >0){\n\t\t\t\tpaddingY = 0;\n\t\t\t}\n\t\t\tlet fontHeight = that.calculationScaleSize(15, currentScanle);\n\t\t\tlet fontTopClose = that.calculationScaleSize(3, currentScanle);\n\t\t\tlet fontFamily = 'gilmerRegular';\n\t\t\tlet dividingLinePadding = that.calculationScaleSize(5, currentScanle);\n\t\t\t// let fontFamily = '';\n\n\t\t\tlet machineNameX = paddingX + that.calculationScaleSize(EXIFInfo.machineName.xAxis, currentScanle);\n\t\t\tlet machineNameY = paddingY + mainImage.originHeight + fontTopClose;\n\t\t\tthis.drawText(\n\t\t\t\tctx,\n\t\t\t\tEXIFInfo.machineName.content,\n\t\t\t\tthat.calculationScaleSize(EXIFInfo.machineName.fontSize, currentScanle),\n\t\t\t\tEXIFInfo.machineName.fontColor,\n\t\t\t\tmachineNameX,\n\t\t\t\tmachineNameY,\n\t\t\t\t5000,\n\t\t\t\ttrue,\n\t\t\t\t'',\n\t\t\t\tfontFamily\n\t\t\t);\n\t\t\tlet authorNameX = paddingX + that.calculationScaleSize(EXIFInfo.authorName.xAxis, currentScanle);\n\t\t\tlet authorNameY = paddingY + that.calculationScaleSize(EXIFInfo.authorName.yAxis, currentScanle) + mainImage.originHeight + fontHeight;\n\t\t\tthis.drawText(\n\t\t\t\tctx,\n\t\t\t\tEXIFInfo.authorName.content,\n\t\t\t\tthat.calculationScaleSize(EXIFInfo.authorName.fontSize, currentScanle),\n\t\t\t\tEXIFInfo.authorName.fontColor,\n\t\t\t\tauthorNameX,\n\t\t\t\tauthorNameY,\n\t\t\t\t5000,\n\t\t\t\tfalse,\n\t\t\t\t'',\n\t\t\t\tfontFamily\n\t\t\t);\n\n\t\t\tlet timeWidth = await this.getTextWidth(ctx, EXIFInfo.time.content, true, that.calculationScaleSize(EXIFInfo.time.fontSize, currentScanle), fontFamily);\n\t\t\tlet imgInfoWidth = await this.getTextWidth(ctx, EXIFInfo.imgInfo.content, false, that.calculationScaleSize(EXIFInfo.imgInfo.fontSize, currentScanle), fontFamily);\n\t\t\tlet rightWidth = timeWidth >= imgInfoWidth ? timeWidth : imgInfoWidth;\n\t\t\tconsole.log('rightWidth', rightWidth, mainImage.width);\n\n\t\t\tlet imgInfoX = mainImage.originWidth - paddingX - rightWidth + that.calculationScaleSize(EXIFInfo.imgInfo.xAxis, currentScanle);\n\t\t\tlet imgInfoY = paddingY + that.calculationScaleSize(EXIFInfo.imgInfo.yAxis, currentScanle) + mainImage.originHeight + fontTopClose;\n\t\t\tthis.drawText(\n\t\t\t\tctx,\n\t\t\t\tEXIFInfo.imgInfo.content,\n\t\t\t\tthat.calculationScaleSize(EXIFInfo.imgInfo.fontSize, currentScanle),\n\t\t\t\tEXIFInfo.imgInfo.fontColor,\n\t\t\t\timgInfoX,\n\t\t\t\timgInfoY,\n\t\t\t\t5000,\n\t\t\t\ttrue,\n\t\t\t\t'',\n\t\t\t\tfontFamily\n\t\t\t);\n\t\t\tlet timeX = mainImage.originWidth - paddingX - rightWidth + that.calculationScaleSize(EXIFInfo.time.xAxis, currentScanle);\n\t\t\tlet timeY = paddingY + that.calculationScaleSize(EXIFInfo.time.yAxis, currentScanle) + mainImage.originHeight + fontHeight;\n\t\t\tthis.drawText(\n\t\t\t\tctx,\n\t\t\t\tEXIFInfo.time.content,\n\t\t\t\tthat.calculationScaleSize(EXIFInfo.time.fontSize, currentScanle),\n\t\t\t\tEXIFInfo.time.fontColor,\n\t\t\t\ttimeX,\n\t\t\t\ttimeY,\n\t\t\t\t5000,\n\t\t\t\tfalse,\n\t\t\t\t'',\n\t\t\t\tfontFamily\n\t\t\t);\n\t\t\t// 绘制 logo 分割线\n\t\t\tlet dividingLineHeight =\n\t\t\t\t(EXIFInfo.InfoWrapperHeight +\n\t\t\t\t\tthat.calculationScaleSize(EXIFInfo.time.fontSize, currentScanle) +\n\t\t\t\t\tthat.calculationScaleSize(EXIFInfo.imgInfo.fontSize, currentScanle)) /\n\t\t\t\t2;\n\t\t\tlet dividingLineX = mainImage.originWidth - paddingX - rightWidth - dividingLinePadding;\n\t\t\tlet dividingLineY = mainImage.originHeight + (EXIFInfo.InfoWrapperHeight - dividingLineHeight) / 2;\n\n\t\t\t//绘制竖线\n\t\t\tctx.moveTo(dividingLineX, dividingLineY); //设置画笔开始点\n\t\t\tctx.lineTo(dividingLineX, dividingLineHeight + dividingLineY); //设置画笔结束点\n\t\t\tctx.strokeStyle = EXIFInfo.color; //设置画笔的颜色\n\t\t\t// ctx.lineJoin = 'round';\n\t\t\tctx.lineWidth = that.calculationScaleSize(0.3, currentScanle); //设置画笔的大小\n\t\t\tctx.stroke();\n\n\t\t\t// 绘制 logo\n\t\t\tlet logoImg = ''; // 最终使用的logo 的url\n\t\t\tlet listImgDefault = '';\n\t\t\tfor (let i = 0; i < this.photoConfigData.length; i++) {\n\t\t\t\tif (this.photoConfigData[i].photo_keyword == 'default') {\n\t\t\t\t\tlistImgDefault = this.photoConfigData[i].photo_url;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tthis.photoDrawInfo.EXIFInfo.brandLogo.content &&\n\t\t\t\t\t(this.photoDrawInfo.EXIFInfo.brandLogo.content.toLowerCase().indexOf(this.photoConfigData[i].photo_keyword.toLowerCase()) >= 0 ||\n\t\t\t\t\t\tthis.photoConfigData[i].photo_keyword.toLowerCase().indexOf(this.photoDrawInfo.EXIFInfo.brandLogo.content.toLowerCase()) >= 0)\n\t\t\t\t) {\n\t\t\t\t\tconsole.log('setLogo');\n\t\t\t\t\tlogoImg = this.photoConfigData[i].photo_url;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 设置logo 的url\n\t\t\tif (!logoImg || logoImg == '') {\n\t\t\t\tlogoImg = listImgDefault;\n\t\t\t} else if ((!logoImg || logoImg == '') && (!listImgDefault || listImgDefault == '')) {\n\t\t\t\tlogoImg = this.defaultLogo;\n\t\t\t}\n\t\t\tconsole.log('logoImg', logoImg, dividingLineHeight);\n\t\t\tuni.getImageInfo({\n\t\t\t\tsrc: logoImg, //logo 图片\n\t\t\t\tsuccess(logoRes) {\n\t\t\t\t\tconsole.log('logo width', logoRes.width);\n\t\t\t\t\tconsole.log('logo height', logoRes.height);\n\t\t\t\t\t// 该高度和分割线的比例\n\t\t\t\t\tlet proportion = 2/3\n\t\t\t\t\tlet logoMaxHeight = dividingLineHeight * proportion;\n\t\t\t\t\tif (logoRes.width / 2.3 > logoRes.height) {\n\t\t\t\t\t\tlogoMaxHeight = dividingLineHeight * proportion * proportion;\n\t\t\t\t\t}\n\t\t\t\t\tlet newSize = that.calculationImageScaleSize({ width: logoRes.width, height: logoRes.height }, logoMaxHeight, 'height');\n\t\t\t\t\tlet logoImgX = mainImage.originWidth - paddingX - rightWidth - 2 * dividingLinePadding - newSize.width;\n\t\t\t\t\tlet logoImgY = mainImage.originHeight + (EXIFInfo.InfoWrapperHeight - logoMaxHeight) / 2;\n\t\t\t\t\tctx.drawImage(logoRes.path, logoImgX, logoImgY, newSize.width, newSize.height);\n\t\t\t\t\t// 绘制方法\n\t\t\t\t\tctx.draw(false, function() {\n\t\t\t\t\t\tthat.saveTempImage();\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log('结束绘制');\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t},\n\t\t\t\tfail() {\n\t\t\t\t\t// 绘制方法\n\t\t\t\t\tctx.draw(false, function() {\n\t\t\t\t\t\tthat.saveTempImage();\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log('结束绘制');\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 绘制字体\n\t\tdrawText(ctx, text, fontSize = 12, color = '#000', x, y, maxWidth = 999, bold, align, fontFamily) {\n\t\t\tif (bold) {\n\t\t\t\tctx.font = `bold ${fontSize}px ${fontFamily ? fontFamily : 'normal'}`;\n\t\t\t} else {\n\t\t\t\tctx.font = `normal ${fontSize}px  ${fontFamily ? fontFamily : 'normal'}`;\n\t\t\t}\n\t\t\tif (align) {\n\t\t\t\tctx.textAlign = align;\n\t\t\t} else {\n\t\t\t\tctx.textAlign = 'left';\n\t\t\t}\n\t\t\tctx.fillStyle = color;\n\t\t\tctx.textBaseline = 'middle';\n\t\t\t// const fontHeight = 12;\n\t\t\tconsole.log('drawText', fontSize, Number(y) + Number(fontSize));\n\t\t\tif (ctx.measureText(text).width > maxWidth) {\n\t\t\t\tvar count = 1;\n\t\t\t\twhile (ctx.measureText(text.slice(0, text.length - count)).width > 693) {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t\tctx.fillText(text.slice(0, text.length - (count + 1)) + '...', x, Number(y) + Number(fontSize));\n\t\t\t} else {\n\t\t\t\tctx.fillText(text, x, Number(y) + Number(fontSize));\n\t\t\t}\n\t\t},\n\n\t\t// 获取canvas和图片宽高格式\n\t\tasync getCanvasSize(imgSource = '') {\n\t\t\tlet that = this;\n\t\t\tif (imgSource == '') {\n\t\t\t\tthrow '文件格式错误';\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait uni.getImageInfo({\n\t\t\t\t\tsrc: imgSource,\n\t\t\t\t\tsuccess: function(image) {\n\t\t\t\t\t\tconsole.log('width', image.width);\n\t\t\t\t\t\tconsole.log('height', image.height);\n\t\t\t\t\t\tlet tempWidth = image.width;\n\t\t\t\t\t\tlet tempHeight = image.height;\n\t\t\t\t\t\tif (image.width > 3000) {\n\t\t\t\t\t\t\ttempWidth = 3000;\n\t\t\t\t\t\t\ttempHeight = tools.formatNumber(tools.formatDecimal((image.height / image.width) * 3000, 2));\n\t\t\t\t\t\t} else if (image.height > 3000) {\n\t\t\t\t\t\t\ttempHeight = 3000;\n\t\t\t\t\t\t\ttempWidth = tools.formatNumber(tools.formatDecimal((image.width / image.height) * 3000, 2));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if (image.width >= image.height) {\n\t\t\t\t\t\t// canvas 信息\n\t\t\t\t\t\tthat.photoDrawInfo.width = tempWidth;\n\t\t\t\t\t\tlet scale = tools.formatNumber(tools.formatDecimal(320 / tempWidth, 5));\n\t\t\t\t\t\tthat.canvasConfig.scale = scale;\n\t\t\t\t\t\tthat.showQuality = scale;\n\t\t\t\t\t\tlet maxCanvasInfoWrapperSize = that.calculationScaleSize(that.canvasConfig.maxCanvasInfoWrapperSize, that.canvasConfig.scale);\n\t\t\t\t\t\tthat.photoDrawInfo.EXIFInfo.InfoWrapperHeight = maxCanvasInfoWrapperSize;\n\t\t\t\t\t\tthat.photoDrawInfo.height = tempHeight + maxCanvasInfoWrapperSize;\n\t\t\t\t\t\tthat.getImageSize(tempWidth, tempHeight);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\t//TODO handle the exception\n\t\t\t\tconsole.log('error', e);\n\t\t\t}\n\t\t},\n\t\t// 重新计算缩放后的图片px比例\n\t\t// 用于计算logo 和 主图片\n\t\tcalculationImageScaleSize(option = {}, maxLength, maxType = 'width') {\n\t\t\tlet newWidth = option.width;\n\t\t\tlet newHeight = option.height;\n\t\t\tif (maxType == 'width') {\n\t\t\t\t// 图片信息\n\t\t\t\tnewWidth = maxLength;\n\t\t\t\tnewHeight = tools.formatNumber(tools.formatDecimal((option.height / option.width) * maxLength, 2));\n\t\t\t} else {\n\t\t\t\t// 图片信息\n\t\t\t\tnewHeight = maxLength;\n\t\t\t\tnewWidth = tools.formatNumber(tools.formatDecimal((option.width / option.height) * maxLength, 2));\n\t\t\t}\n\t\t\treturn { width: newWidth, height: newHeight };\n\t\t},\n\t\t// 重新计算缩放后的px大小\n\t\tcalculationScaleSize(size, scale) {\n\t\t\tlet tempScale = scale;\n\t\t\tif (!tempScale || tempScale == '') {\n\t\t\t\ttempScale = this.canvasConfig.scale;\n\t\t\t}\n\t\t\treturn tools.formatNumber(tools.formatDecimal(size / tempScale, 0));\n\t\t},\n\t\t// 加载图片宽高\n\t\tgetImageSize(width = null, height = null) {\n\t\t\tlet photoDrawInfo = _.cloneDeep(this.photoDrawInfo);\n\t\t\tif (width && height) {\n\t\t\t\tphotoDrawInfo.mainImage.originWidth = width;\n\t\t\t\tphotoDrawInfo.mainImage.originHeight = height;\n\t\t\t}\n\t\t\t// 初始化原图比例\n\t\t\tlet originWidth = photoDrawInfo.mainImage.originWidth;\n\t\t\tlet originHeight = photoDrawInfo.mainImage.originHeight;\n\t\t\tphotoDrawInfo.mainImage.width = photoDrawInfo.mainImage.scale * photoDrawInfo.mainImage.originWidth;\n\t\t\tphotoDrawInfo.mainImage.height = photoDrawInfo.mainImage.scale * photoDrawInfo.mainImage.originHeight;\n\t\t\t// 初始化坐标偏移\n\t\t\tphotoDrawInfo.mainImage.xAxis = 0;\n\t\t\tphotoDrawInfo.mainImage.yAxis = 0;\n\t\t\tif (!photoDrawInfo.mainImage.customXAxis && !photoDrawInfo.mainImage.customXAxis) {\n\t\t\t\tlet tempX = (originWidth - photoDrawInfo.mainImage.width) / 2;\n\t\t\t\tlet tempY = (originHeight - photoDrawInfo.mainImage.height) / 2;\n\t\t\t\tlet padding = tempX >= tempY ? tempX : tempY;\n\n\t\t\t\tif (photoDrawInfo.mainImage.position == 'left') {\n\t\t\t\t\tphotoDrawInfo.mainImage.yAxis = padding;\n\t\t\t\t\tphotoDrawInfo.mainImage.xAxis = 0;\n\t\t\t\t} else if (photoDrawInfo.mainImage.position == 'right') {\n\t\t\t\t\tphotoDrawInfo.mainImage.yAxis = padding;\n\t\t\t\t\tphotoDrawInfo.mainImage.xAxis = padding * 2;\n\t\t\t\t} else if (photoDrawInfo.mainImage.position == 'top') {\n\t\t\t\t\tphotoDrawInfo.mainImage.yAxis = 0;\n\t\t\t\t\tphotoDrawInfo.mainImage.xAxis = padding;\n\t\t\t\t} else if (photoDrawInfo.mainImage.position == 'bottom') {\n\t\t\t\t\tphotoDrawInfo.mainImage.yAxis = padding * 2;\n\t\t\t\t\tphotoDrawInfo.mainImage.xAxis = padding;\n\t\t\t\t} else {\n\t\t\t\t\tphotoDrawInfo.mainImage.yAxis = padding;\n\t\t\t\t\tphotoDrawInfo.mainImage.xAxis = padding;\n\t\t\t\t}\n\n\t\t\t\tlet interpolation = Math.abs(tempX - tempY); // 补充差值\n\t\t\t\tif (tempX > tempY) {\n\t\t\t\t\tphotoDrawInfo.height += interpolation * 2 ;\n\t\t\t\t\tphotoDrawInfo.mainImage.originHeight += interpolation * 2;\n\t\t\t\t} else {\n\t\t\t\t\tphotoDrawInfo.width += interpolation * 2;\n\t\t\t\t\tphotoDrawInfo.mainImage.originWidth += interpolation * 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// if (photoDrawInfo.mainImage.customXAxis) {\n\t\t\t// \tphotoDrawInfo.mainImage.xAxis = photoDrawInfo.mainImage.customXAxis;\n\t\t\t// }\n\t\t\t// if (photoDrawInfo.mainImage.customYAxis) {\n\t\t\t// \tphotoDrawInfo.mainImage.yAxis = photoDrawInfo.mainImage.customYAxis;\n\t\t\t// }\n\t\t\t// 初始化旋转\n\t\t\tphotoDrawInfo.mainImage.angle = photoDrawInfo.mainImage.customAngle;\n\t\t\tthis.photoDrawInfo = photoDrawInfo;\n\n\t\t\tconsole.log('photoDrawInfo', JSON.stringify(photoDrawInfo));\n\t\t},\n\t\tgetTextWidth(ctx, text, bold, fontSize = 12, fontFamily) {\n\t\t\tif (bold) {\n\t\t\t\tctx.font = `bold ${fontSize}px ${fontFamily ? fontFamily : 'normal'}`;\n\t\t\t} else {\n\t\t\t\tctx.font = `normal ${fontSize}px  ${fontFamily ? fontFamily : 'normal'}`;\n\t\t\t}\n\t\t\treturn ctx.measureText(text).width;\n\t\t},\n\t\tsaveImage() {\n\t\t\tlet that = this;\n\t\t\tif (!that.photoDrawInfo.mainImage.content || that.photoDrawInfo.mainImage.content == '') {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '需要先上传图片',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tthat.onUpdatedFile();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.downloadImage();\n\t\t\t}\n\t\t},\n\t\t//点击保存到相册\n\t\tsaveTempImage() {\n\t\t\tconsole.log('saveTempImage');\n\t\t\tvar that = this;\n\t\t\tlet { photoDrawInfo, canvasConfig } = this;\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '生成中...',\n\t\t\t\tduration: 6000,\n\t\t\t\tmask: true\n\t\t\t});\n\t\t\tlet currentScanle = canvasConfig.scale;\n\t\t\tlet ctx = 'canvas';\n\t\t\tlet compressTime = tools.formatNumber(tools.formatDecimal(photoDrawInfo.compress / 100, 2));\n\t\t\tconsole.log(' photoDrawInfo.width * compressTime * this.showQuality', photoDrawInfo.width * compressTime * this.showQuality);\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t//将canvas生成图片\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\twidth: photoDrawInfo.width,\n\t\t\t\theight: photoDrawInfo.height,\n\t\t\t\tdestWidth: photoDrawInfo.width * compressTime, //截取canvas的宽度\n\t\t\t\tdestHeight: photoDrawInfo.height * compressTime, //截取canvas的高度\n\t\t\t\tcanvasId: ctx,\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tthat.tempImage = res.tempFilePath;\n\t\t\t\t\tthat.tempImage = res.tempFilePath;\n\t\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\t\t//将canvas生成图片\n\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\twidth: photoDrawInfo.width,\n\t\t\t\t\t\theight: photoDrawInfo.height,\n\t\t\t\t\t\tdestWidth: photoDrawInfo.width * compressTime, //截取canvas的宽度\n\t\t\t\t\t\tdestHeight: photoDrawInfo.height * compressTime, //截取canvas的高度\n\t\t\t\t\t\tcanvasId: ctx,\n\t\t\t\t\t\tfileType: 'jpg',\n\t\t\t\t\t\tquality: this.showQuality,\n\t\t\t\t\t\tsuccess: res2 => {\n\t\t\t\t\t\t\t// console.log('res.tempFilePath', res.tempFilePath);\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tuni.getFileSystemManager().readFile({\n\t\t\t\t\t\t\t\t\tfilePath: res2.tempFilePath,\n\t\t\t\t\t\t\t\t\tencoding: 'base64',\n\t\t\t\t\t\t\t\t\tsuccess: res3 => {\n\t\t\t\t\t\t\t\t\t\tlet base64 = 'data:image/jpeg;base64,' + res3.data; //不加上这串字符，在页面无法显示\n\t\t\t\t\t\t\t\t\t\tthat.tempImageBase64 = base64;\n\t\t\t\t\t\t\t\t\t\tthat.showGenerator = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t//TODO handle the exception\n\t\t\t\t\t\t\t\tconsole.log('urlTobase64', e);\n\t\t\t\t\t\t\t\tthat.showGenerator = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: err => {\n\t\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\t\tthat.loading = false;\n\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\tthat.showGenerator = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tfail: err => {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t\tthat.loading = false;\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\tthat.showGenerator = false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//点击保存到相册\n\t\tdownloadImage() {\n\t\t\tvar that = this;\n\t\t\tlet { photoDrawInfo } = this;\n\t\t\tlet compressTime = tools.formatNumber(tools.formatDecimal(photoDrawInfo.compress / 100, 2));\n\t\t\tif (photoDrawInfo.width * compressTime > 3000 || photoDrawInfo.height * compressTime > 3000) {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '文件较大，下载中...',\n\t\t\t\t\tduration: 60000,\n\t\t\t\t\tmask: true\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '下载中...',\n\t\t\t\t\tduration: 15000,\n\t\t\t\t\tmask: true\n\t\t\t\t});\n\t\t\t}\n\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\tfilePath: that.tempImage,\n\t\t\t\tsuccess() {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '图片已保存图片到相册',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tfail(error) {\n\t\t\t\t\tconsole.log('error', error);\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\tif (error.errMsg.indexOf('cancel') >= 0) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '取消保存',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '保存失败，请检查权限功能重试',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthat.loading = false;\n\t\t\tuni.hideLoading();\n\t\t},\n\n\t\tclosePopup() {\n\t\t\tthis.showForm = false;\n\t\t},\n\t\topenPopup() {\n\t\t\tlet that = this;\n\t\t\tif (!that.photoDrawInfo.mainImage.content || that.photoDrawInfo.mainImage.content == '') {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '需要先上传图片',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tthat.onUpdatedFile();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthat.showForm = true;\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.photoBorder-page {\n\tposition: relative;\n\toverflow: hidden;\n\t.unshow-page {\n\t\tposition: absolute;\n\t\tleft: 1000px;\n\t}\n\t.canvas-wrapper {\n\t\tposition: relative;\n\t\toverflow: auto;\n\t\tmargin: 24px auto;\n\t\tpadding-bottom: 50px;\n\t\tposition: relative;\n\t\t.canvas-box {\n\t\t\tmargin: 0px auto;\n\t\t\tborder: 1px dashed #ccc;\n\t\t\twidth: 320px;\n\t\t\theight: 240px;\n\t\t\t.canvas {\n\t\t\t\topacity: 0;\n\t\t\t}\n\t\t\t/deep/.uni-canvas {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t}\n\t\t}\n\t\t.iconTipBox_wrapper {\n\t\t\topacity: 0.3;\n\t\t\tposition: absolute;\n\t\t\tleft: 50%;\n\t\t\ttop: 40%;\n\t\t\ttransform: translate(-50%, -50%);\n\t\t\t.icon_wrapper {\n\t\t\t\twidth: 50px;\n\t\t\t\theight: 50px;\n\t\t\t\tmargin: 0px auto;\n\t\t\t\t/deep/.u-icon__icon {\n\t\t\t\t\tfont-size: 50px !important;\n\t\t\t\t\tline-height: 50px !important;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.tip {\n\t\t\t\ttext-align: center;\n\t\t\t\tfont-size: 12px !important;\n\t\t\t\tline-height: 24px !important;\n\t\t\t}\n\t\t}\n\t}\n\t.downLoadBtn {\n\t\tposition: fixed;\n\t\tbottom: 0px;\n\t\twidth: calc(100vw - 24px);\n\t\tpadding: 12px;\n\t\tbackground-color: #fff;\n\t\tborder-top: 1px #ebedf0 solid;\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 1fr;\n\t\tgrid-column-gap: 10px;\n\t\tmargin-bottom: constant(safe-area-inset-bottom); /* 兼容 iOS<11.2 */\n\t\tmargin-bottom: env(safe-area-inset-bottom); /* 兼容iOS>= 11.2 */\n\t}\n\t.popup-wrapper {\n\t\t.form-wrapper {\n\t\t\tbackground-color: #fff;\n\t\t\tmax-height: 60vh;\n\t\t\theight: 60vh;\n\t\t\toverflow-y: auto;\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=d59024d6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=d59024d6&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1663755613124\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}